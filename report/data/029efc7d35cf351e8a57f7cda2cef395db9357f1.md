# Test info

- Name: [UI] [Customers] [Edit] >> Edit customer with smoke invalid data
- Location: /__w/Playwright/Playwright/src/ui/tests/SalesPortal/customer/edit-customer.spec.ts:8:7

# Error details

```
Error: locator.click: Test timeout of 30000ms exceeded.
Call log:
  - waiting for locator('#table-customers tbody tr').filter({ has: getByText('test1748264120331@gmail.com') }).getByTitle('Edit')

    at CustomersPage.call (/__w/Playwright/Playwright/src/ui/pages/customers/customers.page.ts:84:27)
    at _test.test.step.box (/__w/Playwright/Playwright/src/utils/reporter.utils.ts:12:49)
    at CustomersPage.clickTableAction (/__w/Playwright/Playwright/src/utils/reporter.utils.ts:12:19)
    at /__w/Playwright/Playwright/src/ui/tests/SalesPortal/customer/edit-customer.spec.ts:13:25
```

# Page snapshot

```yaml
- img
- text: Sales Portal
- separator
- list:
  - listitem:
    - link "Home":
      - /url: "#"
      - img
      - text: Home
  - listitem:
    - link "Orders":
      - /url: "#"
      - img
      - text: Orders
  - listitem:
    - link "Products":
      - /url: "#"
      - img
      - text: Products
  - listitem:
    - link "Customers":
      - /url: "#"
      - img
      - text: Customers
  - listitem:
    - link "Managers":
      - /url: "#"
      - img
      - text: Managers
- switch "Dark mode"
- text: Dark mode
- separator
- link "RELOGIN!":
  - /url: "#"
  - strong: RELOGIN!
- text: 
- heading "Customers List" [level=2]
- button "+ Add Customer"
- searchbox "Search"
- button " Search" [disabled]
- button " Filter"
- table:
  - rowgroup:
    - row "Email Name Country Created On  Actions":
      - columnheader "Email"
      - columnheader "Name"
      - columnheader "Country"
      - columnheader "Created On "
      - columnheader "Actions"
  - rowgroup:
    - row "test1748731737241@gmail.com TestVita lHumrAmbPZoczfsRfTROaZAPTXEFLID USA 2025/05/31 22:48:57   ":
      - cell "test1748731737241@gmail.com"
      - cell "TestVita lHumrAmbPZoczfsRfTROaZAPTXEFLID"
      - cell "USA"
      - cell "2025/05/31 22:48:57"
      - cell "  ":
        - button ""
        - button ""
        - button ""
    - row "test1748731713394@gmail.com TestVita oRBMLQOTiKwtpzIOKxfDiNQFTvUPrgO Russia 2025/05/31 22:48:33   ":
      - cell "test1748731713394@gmail.com"
      - cell "TestVita oRBMLQOTiKwtpzIOKxfDiNQFTvUPrgO"
      - cell "Russia"
      - cell "2025/05/31 22:48:33"
      - cell "  ":
        - button ""
        - button ""
        - button ""
    - row "test1748731318789@gmail.com TestVita HXZNIZyHJmCRIlhjLYidKSqfMjrbCkm Belarus 2025/05/31 22:41:59   ":
      - cell "test1748731318789@gmail.com"
      - cell "TestVita HXZNIZyHJmCRIlhjLYidKSqfMjrbCkm"
      - cell "Belarus"
      - cell "2025/05/31 22:41:59"
      - cell "  ":
        - button ""
        - button ""
        - button ""
    - row "test1748731310261@gmail.com TestVita cbzUyNAWLqXUamPBWmRSdytpesZicJf Belarus 2025/05/31 22:41:50   ":
      - cell "test1748731310261@gmail.com"
      - cell "TestVita cbzUyNAWLqXUamPBWmRSdytpesZicJf"
      - cell "Belarus"
      - cell "2025/05/31 22:41:50"
      - cell "  ":
        - button ""
        - button ""
        - button ""
    - row "test1748731306123@gmail.com TestVita YEJEmScFbEarNfvKuxyDdGZAJpBYZgP Canada 2025/05/31 22:41:46   ":
      - cell "test1748731306123@gmail.com"
      - cell "TestVita YEJEmScFbEarNfvKuxyDdGZAJpBYZgP"
      - cell "Canada"
      - cell "2025/05/31 22:41:46"
      - cell "  ":
        - button ""
        - button ""
        - button ""
    - row "test1748731106468@gmail.com TestVita SIzVxDLrrdfAxQnsZwbVzQNnYIWPphK Belarus 2025/05/31 22:38:26   ":
      - cell "test1748731106468@gmail.com"
      - cell "TestVita SIzVxDLrrdfAxQnsZwbVzQNnYIWPphK"
      - cell "Belarus"
      - cell "2025/05/31 22:38:26"
      - cell "  ":
        - button ""
        - button ""
        - button ""
    - row "test1748731095426@gmail.com TestVita jKNpKlRsGasOSMHpYEGKPydvZzDonYS Russia 2025/05/31 22:38:15   ":
      - cell "test1748731095426@gmail.com"
      - cell "TestVita jKNpKlRsGasOSMHpYEGKPydvZzDonYS"
      - cell "Russia"
      - cell "2025/05/31 22:38:15"
      - cell "  ":
        - button ""
        - button ""
        - button ""
    - row "test1748724829012@gmail.com TestVita lIXuBngjcsVebGOmCNaKYmigAyvzIUM Russia 2025/05/31 20:53:49   ":
      - cell "test1748724829012@gmail.com"
      - cell "TestVita lIXuBngjcsVebGOmCNaKYmigAyvzIUM"
      - cell "Russia"
      - cell "2025/05/31 20:53:49"
      - cell "  ":
        - button ""
        - button ""
        - button ""
    - row "test1748724702750@gmail.com TestVita JItOxCIIROFJzWFQbGzcZoBCrUTzxtR France 2025/05/31 20:51:43   ":
      - cell "test1748724702750@gmail.com"
      - cell "TestVita JItOxCIIROFJzWFQbGzcZoBCrUTzxtR"
      - cell "France"
      - cell "2025/05/31 20:51:43"
      - cell "  ":
        - button ""
        - button ""
        - button ""
    - row "test1748724671869@gmail.com TestVita KxPkusLXinaJeujseggArjiBetRqhjS Belarus 2025/05/31 20:51:12   ":
      - cell "test1748724671869@gmail.com"
      - cell "TestVita KxPkusLXinaJeujseggArjiBetRqhjS"
      - cell "Belarus"
      - cell "2025/05/31 20:51:12"
      - cell "  ":
        - button ""
        - button ""
        - button ""
- text: "Items on page:"
- combobox:
  - option "10" [selected]
  - option "25"
  - option "50"
  - option "100"
- button "" [disabled]
- button "1"
- button "2"
- button "3"
- button "4"
- button "5"
- button "6"
- button "7"
- button "8"
- text: ...
- button "28"
- button ""
```

# Test source

```ts
   1 | import { ICustomer, ICustomerInTable } from "types/customer.types";
   2 | import { SalesPortalPage } from "../salePortal.page";
   3 | import { COUNTRIES } from "data/customers/countries.data";
   4 | import { FilterModal } from "../modals/customers/filter.modal";
   5 | import { expect } from "fixtures/pages.fixture";
   6 | import { DeleteCustomerModal } from "../modals/customers/delete.modal";
   7 | import { customersSortField } from "types/api.types";
   8 | import { logStep } from "utils/reporter.utils";
   9 |
   10 | export class CustomersPage extends SalesPortalPage {
   11 |   //modals
   12 |   readonly filterModal = new FilterModal(this.page);
   13 |   readonly deleteCustomerModal = new DeleteCustomerModal(this.page);
   14 |
   15 |   //header menu
   16 |   readonly addNewCustomerButton = this.page.getByRole("button", {
   17 |     name: "Add Customer",
   18 |   });
   19 |   //search
   20 |   readonly searchInput = this.page.locator('input[type="search"]');
   21 |   readonly searchButton = this.page.locator("#search-customer");
   22 |   readonly chipButton = this.page.locator(".chip");
   23 |   readonly searchChipButton = this.page.locator('div[data-chip-customers="search"]');
   24 |
   25 |   //filter - modal window
   26 |   readonly filterButton = this.page.getByRole("button", { name: "Filter" });
   27 |
   28 |   //table
   29 |   readonly table = this.page.locator("#table-customers");
   30 |
   31 |   //table -headers
   32 |   readonly tableHeader = this.page.locator("#table-customers th div[current]");
   33 |   readonly emailHeader = this.tableHeader.filter({ hasText: "Email" });
   34 |   readonly nameHeader = this.tableHeader.filter({ hasText: "Name" });
   35 |   readonly countryHeader = this.tableHeader.filter({ hasText: "Country" });
   36 |   readonly createdOnHeader = this.tableHeader.filter({ hasText: "Created On" });
   37 |
   38 |   //table -row
   39 |   readonly tableRow = this.page.locator("#table-customers tbody tr");
   40 |   readonly tableRowByEmail = (email: string) => this.tableRow.filter({ has: this.page.getByText(email) });
   41 |   readonly emailCell = (email: string) => this.tableRowByEmail(email).locator("td").nth(0);
   42 |   readonly nameCell = (email: string) => this.tableRowByEmail(email).locator("td").nth(1);
   43 |   readonly countryCell = (email: string) => this.tableRowByEmail(email).locator("td").nth(2);
   44 |   readonly createdOnCell = (email: string) => this.tableRowByEmail(email).locator("td").nth(3);
   45 |   readonly editButton = (email: string) => this.tableRowByEmail(email).getByTitle("Edit");
   46 |   readonly detailsButton = (email: string) => this.tableRowByEmail(email).getByTitle("Details");
   47 |   readonly deleteButton = (email: string) => this.tableRowByEmail(email).getByTitle("Delete");
   48 |   readonly emptyTableRow = this.page.locator("td.fs-italic");
   49 |
   50 |   readonly uniqueElement = this.addNewCustomerButton;
   51 |
   52 |   @logStep("Go to CustomersPage")
   53 |   async open() {
   54 |     // Выполняет fun renderCustomersPage в контексте браузера и ожидает её завершения
   55 |     await this.page.evaluate(async () => {
   56 |       //Приводит объект 'window' к типу, который включает  fun renderCustomersPage и вызывает её.
   57 |       await (window as typeof window & { renderCustomersPage: () => Promise<void> }).renderCustomersPage();
   58 |     });
   59 |   }
   60 |
   61 |   @logStep("UI: Click on Add New Customer button on CustomersPage")
   62 |   async clickAddNewCustomer() {
   63 |     await this.addNewCustomerButton.click();
   64 |   }
   65 |
   66 |   @logStep("UI: Click on Delete Customer button on CustomersPage")
   67 |   async clickDeleteCustomer(customerEmail: string) {
   68 |     await this.deleteButton(customerEmail).click();
   69 |   }
   70 |
   71 |   @logStep("UI: Click on Filter Button on Customers Page")
   72 |   async clickFilter() {
   73 |     await this.filterButton.click();
   74 |   }
   75 |
   76 |   @logStep("UI: Click on Table Action on CustomersPage")
   77 |   async clickTableAction(customerEmail: string, action: "edit" | "details" | "delete") {
   78 |     const buttons = {
   79 |       edit: this.editButton(customerEmail),
   80 |       details: this.detailsButton(customerEmail),
   81 |       delete: this.deleteButton(customerEmail),
   82 |     };
   83 |
>  84 |     await buttons[action].click();
      |                           ^ Error: locator.click: Test timeout of 30000ms exceeded.
   85 |   }
   86 |
   87 |   @logStep("Get Customer Data by Email in Table on CustomersPage")
   88 |   async getCustomerData(customerEmail: string): Promise<ICustomerInTable> {
   89 |     //variant 1 - в асинх последовательные действия  - плохо
   90 |     // return {
   91 |     //   email: await this.emailCell(email).textContent(),
   92 |     //   name: await this.nameCell(email).textContent(),
   93 |     //   country: await this.countryCell(email).textContent(),
   94 |     //   createdOn: await this.createdOnCell(email).textContent(),
   95 |     // };
   96 |
   97 |     //variant 2 - действия в параллель
   98 |     // const [email, name, country, createdOn] = await Promise.all([
   99 |     //   this.emailCell(customerEmail).textContent(),
  100 |     //   this.nameCell(customerEmail).textContent(),
  101 |     //   this.countryCell(customerEmail).textContent(),
  102 |     //   this.createdOnCell(customerEmail).textContent(),
  103 |     // ]);
  104 |     // return { email, name, country, createdOn };
  105 |
  106 |     //variant 3
  107 |     const [email, name, country, createdOn] = await this.tableRowByEmail(customerEmail).locator("td").allInnerTexts(); //массив строк >> в const распаковывает этот массив в отдельные переменные
  108 |     return {
  109 |       //вернёт объект с 3 полями:
  110 |       email,
  111 |       name,
  112 |       country: country as COUNTRIES,
  113 |       //createdOn
  114 |     };
  115 |   }
  116 |
  117 |   //все строки таблицы >> возвращает  массив объектов email, name, country из всей таблицы
  118 |   @logStep("Get All Customers data in Table on CustomersPage")
  119 |   async getTabeData() {
  120 |     const tableData: Array<ICustomerInTable> = [];
  121 |
  122 |     const rows = await this.tableRow.all();
  123 |     for (const row of rows) {
  124 |       const [email, name, country, createdOn] = await row.locator("td").allInnerTexts();
  125 |       tableData.push({
  126 |         email,
  127 |         name,
  128 |         country: country as COUNTRIES,
  129 |         //createdOn
  130 |       });
  131 |     }
  132 |     return tableData;
  133 |   }
  134 |
  135 |   @logStep("UI: Fill Search Field on CustomersPage")
  136 |   async fillSearch(value: string | number) {
  137 |     await this.searchInput.fill(String(value));
  138 |   }
  139 |
  140 |   @logStep("UI: Click on SearchButton on CustomersPage")
  141 |   async clickSearch() {
  142 |     await this.searchButton.click();
  143 |   }
  144 |
  145 |   @logStep("UI: Perform Search on CustomersPage")
  146 |   async search(value: string | number) {
  147 |     await this.fillSearch(value);
  148 |     await this.clickSearch();
  149 |     await this.waitForOpened();
  150 |   }
  151 |
  152 |   //клик по хедерам таблицы customers
  153 |   @logStep("UI: Click on Table Header on CustomersPage")
  154 |   async clickTableHeader(header: customersSortField) {
  155 |     switch (header) {
  156 |       case "email":
  157 |         await this.emailHeader.click();
  158 |         break;
  159 |       case "name":
  160 |         await this.nameHeader.click();
  161 |         break;
  162 |       case "country":
  163 |         await this.countryHeader.click();
  164 |         break;
  165 |       case "createdOn":
  166 |         await this.createdOnHeader.click();
  167 |         break;
  168 |     }
  169 |   }
  170 |
  171 |   //hw21
  172 |   async checkNewCustomer(email: string, name: string, country: string) {
  173 |     const tableFirstRow = this.page.locator("#table-customers tbody tr:first-child");
  174 |     const emailList = tableFirstRow.locator("td:nth-child(1)");
  175 |     await expect.soft(emailList).toHaveText(email);
  176 |     const namelList = tableFirstRow.locator("td:nth-child(2)");
  177 |     await expect.soft(namelList).toHaveText(name);
  178 |     const countrylList = tableFirstRow.locator("td:nth-child(3)");
  179 |     await expect.soft(countrylList).toHaveText(country);
  180 |   }
  181 | }
  182 |
```